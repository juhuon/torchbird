<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>历史上的今天</title>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        h1 {
            text-align: center;
            margin-top: 50px;
        }
        .container {
            width: 800px;
            margin: 0 auto;
        }
        .card {
            padding: 20px;
            margin-bottom: 20px;
            background-color: #f8f8f8;
            box-shadow: 0 2px 4px #ccc;
        }
        .date {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .content {
            font-size: 16px;
            line-height: 1.5;
            color: #666;
        }
        .content span {
            display: block;
            margin-top: 10px;
            text-indent: 2em;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>历史上的今天</h1>
    <div class="container"></div>
    <script>
        $(function() {
            $.ajax({
                url: "https://api.ooomn.com/api/history?format=json",
                type: "GET",
                dataType: "json",
                success: function(data) {
                    if (data.code == "200") {
                        var container = $(".container");
                        var card = $("<div class='card'></div>");
                        var date = $("<div class='date'>" + data.data + "</div>");
                        var content = $("<div class='content'></div>");
                        var sentences = data.content.split("。");
                        for (var i = 0; i < sentences.length; i++) {
                            if (sentences[i] != "") {
                                var sentence = $("<span id='" + i + "'>" + sentences[i] + "。</span>");
                                content.append(sentence);
                            }
                        }
                        card.append(date).append(content);
                        container.append(card);
                        content.find("span").click(function() {
                            var id = $(this).attr("id");
                            var sentence = $(this).text().replace(/。/g, "");
                            var url = "https://www.baidu.com/s?wd=" + encodeURI(sentence);
                            window.open(url);
                        });
                    } else {
                        alert("获取历史信息失败！");
                    }
                },
                error: function() {
                    alert("获取历史信息失败！");
                }
            });
        });
    </s<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>历史上的今天</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="shortcut icon" href="#" type="#">
    <link rel="stylesheet" href="layui-v2.6.8/layui/css/layui.css">
    <script src="js/jquery-3.6.0.min.js"></script>
</head>

<body>
    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
        <legend class="layui-bg-cyan">历史上的今天</legend>
    </fieldset>
    <!-- 历史容器 -->
    <ul class="layui-timeline" id="history-box">
    </ul>

    <script src="layui-v2.6.8/layui/layui.js"></script>
    <!-- 引入template-web模版库文件 -->
    <script src="js/template-web.js"></script>
    <!-- 模版内容 -->
    <script type="text/html" id="history-tpl">
        {{each info}}
        <li class="layui-timeline-item">
            <i class="layui-icon layui-icon-flag" style="font-size: 20px; color: #5FB878;"></i>
            <div class="layui-timeline-content layui-text">
                <h3 class="layui-timeline-title">{{$value.year}}年 {{data.month}}月{{data.day}}日</h3>
                <p>
                    {{$value.title}}<a href={{$value.link}} title="百度百科" style="text-decoration: none;"><i
                            class="layui-icon layui-icon-search"
                            style="margin-left: 4px; font-size: 30px; color: #1E9FFF; vertical-align: baseline;"></i></a>
                </p>
            </div>
        </li>
        {{/each}}
    </script>
    
    <script type="text/javascript">
        var historyBox = document.getElementById("history-box");
        $.ajax({
            type: "get",
            url: "https://query.asilu.com/today/list",
            dataType: "jsonp",
            success: function (data) {
                var html = template("history-tpl", {
                    info: data.data,
                    data: data
                });
                historyBox.innerHTML = html;
            }
        });
    </script>
</body>

</html>
